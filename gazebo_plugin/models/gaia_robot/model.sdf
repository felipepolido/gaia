<?xml version="1.0" ?>

<sdf version="1.4">

	<model name="my_robot">

		<link name="chassis">
			<pose>0 0 0.625 0 0 0</pose>

			<inertial>
				<mass value="362.61"/>
				<inertia ixx="81.0" ixy="0.0" ixz="0.0" iyy="81.0" iyz="0.0" izz="113.0"/>
			</inertial>

			<collision name="collision">
				<geometry>
					<box>
						<size>1.86 0.9 0.6</size>
					</box>
				</geometry>
			</collision>

			<visual name="visual">
				<geometry>
					<box>
						<size>1.86 0.9 0.6</size>
					</box>
				</geometry>
			</visual>

			<collision name="first_caster_collision">
				<pose>0.87 0.42 -0.5 0 0 0</pose>

				<geometry>
					<sphere>
						<radius>.125</radius>
					</sphere>c
				</geometry>

				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<slip1>1.0</slip1>
							<slip2>1.0</slip2>
						</ode>
					</friction>
				</surface>
			</collision>

			<visual name="first_caster_visual">
				<pose>0.87 0.42 -0.5 0 0 0</pose>
				<geometry>
					<sphere>
						<radius>.125</radius>
					</sphere>
				</geometry>
			</visual>


			<collision name="second_caster_collision">
				<pose>0.87 -0.42 -0.5 0 0 0</pose>

				<geometry>
					<sphere>
						<radius>.125</radius>
					</sphere>
				</geometry>

				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<slip1>1.0</slip1>
							<slip2>1.0</slip2>
						</ode>
					</friction>
				</surface>
			</collision>

			<visual name="second_caster_visual">
				<pose>0.87 -0.42 -0.5 0 0 0</pose>
				<geometry>
					<sphere>
						<radius>.125</radius>
					</sphere>
				</geometry>
			</visual>
		</link>

		<link name="left_wheel">
			<pose>-0.6 0.42 0.23 0 1.5707 1.5707</pose>

			<collision name="collision">
				<geometry>
					<cylinder>
						<radius>.23</radius>
						<length>.15</length>
					</cylinder>
				</geometry>
			</collision>

			<visual name="visual">
				<geometry>
					<cylinder>
						<radius>.23</radius>
						<length>.15</length>
					</cylinder>
				</geometry>
			</visual>

			<inertial>
				<mass value="5"/>
				<inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
			</inertial>

		</link>

		<link name="right_wheel">
			<pose>-0.6 -0.42 0.23 0 1.5707 1.5707</pose>

			<collision name="collision">
				<geometry>
					<cylinder>
						<radius>.23</radius>
						<length>.15</length>
					</cylinder>
				</geometry>
			</collision>

			<visual name="visual">
				<geometry>
					<cylinder>
						<radius>.23</radius>
						<length>.15</length>
					</cylinder>
				</geometry>
			</visual>

			<inertial>
				<mass value="5"/>
				<inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
			</inertial>
			
		</link>

		<joint type="revolute" name="left_wheel_hinge">
			<pose>0 0 -0.03 0 0 0</pose>
			<child>left_wheel</child>
			<parent>chassis</parent>
			<axis>
				<xyz>0 1 0</xyz>
			</axis>
		</joint>

		<joint type="revolute" name="right_wheel_hinge">
			<pose>0 0 0.03 0 0 0</pose>
			<child>right_wheel</child>
			<parent>chassis</parent>
			<axis>
				<xyz>0 1 0</xyz>
			</axis>
		</joint>

		<include>
			<uri>model://hokuyo_urg_04lx_ug01</uri>
			<pose>1.2 -0.3 0.35 0 0 0</pose>
		</include>

		<joint name="hokuyo_joint" type="revolute">
			<child>hokuyo_urg_04lx_ug01::link</child>
			<parent>chassis</parent>
			<axis>
				<xyz>0 0 1</xyz>
				<limit>
					<upper>0</upper>
					<lower>0</lower>
				</limit>
			</axis>
		</joint>

		<plugin filename="libgaia_gazebo_plugin.so" name="gaia_gazebo_plugin">
			<left_wheel_hinge>left_wheel_hinge</left_wheel_hinge>
			<right_wheel_hinge>right_wheel_hinge</right_wheel_hinge>
			<gain>0.1</gain>
			<ray_sensor>laser</ray_sensor>

			<lidar_gaussian_noise>0.01</lidar_gaussian_noise> 
			<lidar_update_rate>10</lidar_update_rate>
			<lidar_min_range>0.02</lidar_min_range>
			<lidar_max_range>5.6</lidar_max_range>
			<lidar_min_intensity>0</lidar_min_intensity>
			<lidar_angle_range>4.1887902</lidar_angle_range>
			<lidar_scan_steps>1024</lidar_scan_steps>

		</plugin>

	</model>
</sdf>
